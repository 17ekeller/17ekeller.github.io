<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Language" content="en"> <title>Analytics Architecture</title> <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"> <link rel="dns-prefetch" href="//cdn.mathjax.org"> <link rel="dns-prefetch" href="//cdnjs.cloudflare.com"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="Product Analytics &amp; Analytics Engineering Portfolio"> <meta name="robots" content="all"> <meta name="author" content="Eric Keller"> <link rel="canonical" href="http://localhost:4000/projects/analytics-architecture/"> <link rel="alternate" type="application/rss+xml" title="RSS Feed for Eric Keller" href="/feed.xml" /> <!-- JQuery --> <script aync src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <!-- Page-type specific CSS --> <!-- Theme CSS --> <link rel="stylesheet" href="/css/junior.css?202602091123" type="text/css"> <!-- Fonts --> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Sorts+Mill+Goudy:ital@0;1&family=Young+Serif&display=swap" rel="stylesheet"> <!-- MathJax --> <!-- Verifications --> <!-- Open Graph --> <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Analytics Architecture"> <meta property="og:description" content="Product Analytics &amp; Analytics Engineering Portfolio"> <meta property="og:url" content="http://localhost:4000/projects/analytics-architecture/"> <meta property="og:site_name" content="Eric Keller"> <!-- Twitter Card --> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Analytics Architecture" /> <meta name="twitter:description" content="Product Analytics & Analytics Engineering Portfolio" /> <meta name="twitter:url" content="http://localhost:4000/projects/analytics-architecture/" /> <!-- Icons --> <link rel="icon" href="/assets/images/icons8-combo-chart-48.png" type="image/x-icon"> </head> <body class="site"> <header class="center"> <div class="desktop-header"> <!-- Brand --> <div class="header-brand"> <a href="/" class="brand-text-link"> <span class="brand-text"> <b>Eric Keller</b><br> <em>BI & Analytics Engineer</em> </span> </a> </div> <!-- Navigation --> <div class="header-nav"> <div class="header-each"> <a href="/" class=""> <span>Home</span> </a> </div> <div class="header-each"> <a href="/projects/projects_home/" class="active"> <span>Projects</span> </a> </div> <div class="header-each"> <a href="/aboutme/" class=""> <span>About Me</span> </a> </div> </div> </div> </header> <style> html, body { margin: 0; padding: 0; } /* ===== HEADER ===== */ header { position: relative; width: 100%; z-index: 10; } /* ===== DESKTOP HEADER ===== */ header .desktop-header { max-width: 155em; margin: 0 auto; padding: 0 5%; display: flex; flex-direction: column; gap: 10px; } /* ===== BRAND FIXED FULL LEFT ===== */ header .header-brand { position: fixed; top: 0; left: 0; width: 100%; padding: 10px 20px; background-color: rgba(255,255,255,0.7); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); box-sizing: border-box; z-index: 999; font-size: 0.85em; line-height: 1.2; font-weight: 500; letter-spacing: 0.02em; text-align: left; white-space: normal; transition: opacity 0.3s ease, transform 0.3s ease; } /* ===== FADE EFFECT PURE CSS (best-effort) ===== */ header:has(+ *:not(:root)) .header-brand { opacity: 0.85; } /* ===== NAVIGATION ===== */ header .header-nav { margin-top: 80px; /* space below fixed brand */ margin-bottom: 30px; display: flex; flex-wrap: wrap; /* allow wrapping on mobile */ justify-content: center; gap: 10px 40px; /* vertical + horizontal gap */ width: 100%; } /* ===== NAV LINKS ===== */ header .header-each a { text-decoration: none; color: #000; font-weight: 300; position: relative; } header .header-each a.active { font-weight: 700; letter-spacing: 0.02em; text-shadow: .50px 0 currentColor; } /* underline for nav links */ header .header-each a span { display: inline-block; /* ensures underline covers wrapped text */ position: relative; } header .header-each a span::before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; border-bottom: 2px solid #000; transition: transform 0.4s; transform: scaleX(1); } header .header-each a:hover span::before { transform: scaleX(0); } /* BRAND TEXT */ header .brand-text { display: inline-block; color: #000; line-height: 1.2; } .brand-text-link { text-decoration: none; /* remove underline */ color: inherit; /* keep text color */ display: inline-block; /* maintain block-like layout if needed */ } /* ===== MOBILE RESPONSIVE ===== */ @media screen and (max-width: 768px) { /* Stack brand and nav */ header .desktop-header { flex-direction: column; align-items: center; } /* Center brand text */ header .header-brand { text-align: center; padding: 10px 20px; } header .header-nav a { font-size: 1.25em; /* smaller font on mobile */ } /* Optional: reduce gap between links */ header .header-nav { gap: 45px; /* smaller horizontal spacing */ flex-wrap: nowrap; /* prevent wrapping */ justify-content: center; } } </style> <div class="site-wrap"> <div class="post p2 p-responsive wrap" role="main"> <div class="measure"> <h1 id="my-analytics-architecture-methodology">My Analytics Architecture Methodology</h1> <p>This page outlines the analytics architecture methodology I‚Äôve designed for <strong>consumer facing software products</strong>, particularly for <strong>feature usage and performance analytics</strong>, but applicable to analytics systems across domains.</p> <p>The design prioritizes <strong>scalability, cost efficiency, and fast stakeholder access</strong> to often complex and messy raw event data.</p> <p>At a high level, the architecture follows a <strong>directed, acyclic, layered data pipeline</strong> where each layer has a clearly defined responsibility and downstream consumer.</p> <hr /> <h2 id="core-design-principles">Core Design Principles</h2> <ul> <li> <p><strong>Directed and acyclic pipelines</strong><br /> Each dataset flows in one direction only. No circular dependencies, no implicit backfills.</p> </li> <li> <p><strong>Incremental first design</strong><br /> Pipelines append or update only new data using partition columns. Full table rebuilds are avoided unless absolutely necessary or cost negligible.</p> </li> <li> <p><strong>Cost aware analytics</strong><br /> Storage is cheap and compute is not. Expensive aggregations are computed once and reused downstream.</p> </li> <li> <p><strong>Clear separation of concerns</strong><br /> Raw ingestion, data preparation, and reporting are handled in distinct layers with the ability to version control and access control each layer to necessary parties.</p> </li> </ul> <hr /> <h2 id="layered-architecture-overview">Layered Architecture Overview</h2> <h3 id="1-raw-fact-tables-event-level-data">1. Raw <code class="language-plaintext highlighter-rouge">fact</code> Tables (Event Level Data)</h3> <p>This layer stores <strong>raw, high volume event data</strong> directly from production systems.</p> <p><strong>Characteristics</strong></p> <ul> <li>Hundreds of millions to billions of rows</li> <li>Often exceeds 1 (one) TB in size</li> <li>Append only, batch insert or merge jobs</li> <li>Partitioned by event date (or shard date if working with sharded marts)</li> <li>Partition expiry set to ~90 days</li> <li>Clustered by commonly filtered columns</li> </ul> <p><strong>Responsibilities</strong></p> <ul> <li>This layer exists for <strong>correctness and traceability</strong>, not analytics consumption</li> </ul> <p><strong>Design Rationale</strong></p> <ul> <li>Raw events are expensive to scan and rarely needed long term</li> <li>Short retention minimizes storage costs, but allows for quick searching of specific, recent partitions</li> <li>Avoid rebuilding or rescanning large sharded tables on every load, which is extremely inefficient and costly</li> </ul> <hr /> <h3 id="2-staging-tables-stg">2. Staging Tables (<code class="language-plaintext highlighter-rouge">stg</code>)</h3> <p>Staging tables prepare data for analytical use while still retaining relatively fine granularity.</p> <p><strong>Characteristics</strong></p> <ul> <li>Built directly from raw fact tables</li> <li>Incremental insert or merge batch loads only</li> <li>Always select the most recent data using the partition column</li> <li>Clustered to optimize downstream queries</li> <li>Optional partitioning and expiry depending on table size</li> <li>Enforce testing to ensure data quality, alert when data does not flow cleanly to this layer</li> </ul> <p><strong>Responsibilities</strong></p> <ul> <li>Normalize and clean raw event data</li> <li>Apply consistent data modeling and transformations</li> <li>Reduce query complexity for downstream layers</li> </ul> <p><strong>Design Rationale</strong></p> <ul> <li>Rebuilding staging tables on every load does not scale</li> <li>Incremental processing dramatically reduces compute cost</li> <li>This layer is optimized for <em>analytics engineering</em>, not direct stakeholder access</li> </ul> <hr /> <h3 id="3-reporting-tables-rpt">3. Reporting Tables (<code class="language-plaintext highlighter-rouge">rpt</code>)</h3> <p>Reporting tables are the <strong>stakeholder facing analytics layer</strong>.</p> <p><strong>Characteristics</strong></p> <ul> <li>Built from one or more staging tables</li> <li>Highly aggregated</li> <li>Primary keys are typically date based and/or high level dimensions (e.g. device type)</li> <li>‚ÄúAll time‚Äù view with no partition expiry</li> <li>Typically under 50GB, often <strong>significantly</strong> smaller</li> <li>Optional clustering for dashboard filter performance; a <code class="language-plaintext highlighter-rouge">rpt</code> table under 64MB clustering for performance is negliglble</li> </ul> <p><strong>Responsibilities</strong></p> <ul> <li>Serve dashboards, reports, and recurring analyses</li> <li>Provide stable, trusted metrics</li> <li>Eliminate the need for stakeholders to query large datasets</li> </ul> <p><strong>Design Rationale</strong></p> <ul> <li>Heavy aggregation drastically reduces storage requirements</li> <li>Precomputing expensive logic keeps dashboards fast and predictable</li> <li>Long term historical trends can be preserved without retaining raw events</li> </ul> <hr /> <h2 id="why-this-architecture-works-well-for-consumer-products">Why This Architecture Works Well for Consumer Products</h2> <ul> <li>Handles <strong>massive event volumes</strong> without exploding costs</li> <li>Keeps <strong>dashboard latency low</strong>, even at scale</li> <li>Prevents BI tools from querying raw or semi raw data</li> <li>Encourages metric consistency and reuse, preventing schema or metric drift</li> <li>Scales cleanly as new features and data sources are added</li> </ul> <p>This approach closely aligns with modern <a href="https://www.databricks.com/glossary/medallion-architecture" target="_blank" rel="noopener noreferrer">medallion style architectures</a> and <a href="https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/aggregate-fact-table-cube/" target="_blank" rel="noopener noreferrer">aggregate fact tables</a>, adapted specifically for high volume product telemetry and performance data.</p> <p>While my methodology was developed in a Google Cloud environment (BigQuery and Dataform), it is warehouse agnostic by design and translates cleanly to Snowflake with dbt, Databricks (Delta Lake), Amazon Redshift, Azure Synapse and other modern analytical platforms that support incremental processing and partition aware query optimization.</p> <hr /> <h2 id="summary">Summary</h2> <p>My methodology emphasizes:</p> <ul> <li>Incremental processing over full rebuilds</li> <li>Aggregates over repeated computation, especially at the stakeholder facing report level</li> <li>Clear data contrasts between layers</li> <li>Practical tradeoffs between data fidelity, cost, and usability</li> </ul> <p>The result is an analytics system that is <strong>fast, predictable, testable and sustainable</strong>, even as product usage and data volumes grow.</p> <p><em>Velut arbor aevo!</em> üå≥</p> </div> </div> </div> <footer class="center"> <div class="desktop-footer"> <div class="footer-each"> <h5> <a href="https://maps.app.goo.gl/zFHG2eaNr5pMqPd5A" target="_blank"> <span>Bartlett, Illinois USA</span> </a> </h5> </div> <div class="footer-each"> <h5><a href="tel:+18475259941"><span>+1 847-525-9941</span></a></h5> </div> <div class="footer-each"> <h5><a href="mailto:erickellr@yahoo.com"><span>erickellr@yahoo.com</span></a></h5> </div> <div class="footer-each"> <h5><a href="https://www.linkedin.com/in/eric-keller-b7303418b/" target="_blank" alt="LinkedIn"><span>LinkedIn</span></a></h5> </div> </div> </footer> <style> footer .desktop-footer { margin-left: auto; margin-right: auto; } .client-each, .footer-bar, .section, footer .desktop-footer { max-width: 155em; } footer { margin-bottom: 30px; visibility: visible; -webkit-transform: translateY(0) scale(1); opacity: 1; transform: translateY(0) scale(1); opacity: 1; -webkit-transition: -webkit-transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; } </style> <style> .home .contact-overlay .contact-a:nth-child(6n+1), .icon-and-text:nth-child(2n+1), footer .desktop-footer .footer-each:nth-child(6n+1) { clear: left; } footer .desktop-footer { display: flex; justify-content: space-between; /* spreads items across the full width */ flex-wrap: wrap; /* wraps items on smaller screens */ max-width: 155em; /* keep your existing max-width */ margin: 0 auto; /* center the container itself */ padding: 0 2%; /* optional: add a little padding at sides */ } footer .desktop-footer .footer-each { float: none; /* remove old float */ width: auto; /* let flex decide width */ margin: 0; /* remove old margins */ text-align: center; /* keep text centered inside each item */ } footer .desktop-footer { padding: 0 5%; /* add some breathing room on sides */ } footer .footer-each a { text-decoration: none; background-image: none; color: #000; font-weight: 300; word-wrap: normal; } footer .footer-each a:active, footer .footer-each a:hover { outline-width: 0; } .founder-each h2, .group-pic, .header-title, .home .contact-overlay .contact-a, .section h1, .section h2, .section h3, .section p, .team small, .title-div, body .home .contact-overlay .contact-a-mob, footer .desktop-footer .footer-each, footer .mobile-footer, footer .mobile-footer .footer-each, nav li { text-align: center; } .contact-a, .contact-a span, .contact-a-mob span, .footer-each span, footer, sub, sup { position: relative; } .contact-a span:before, .contact-a-mob span:before, .footer-each span:before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; border-bottom: 2px solid #000; transition: .4s; -webkit-transform: scaleX(1); transform: scaleX(1); } .contact-a a:hover span:before, .contact-a-mob a:hover span:before, .footer-each a:hover span:before { content: ''; -webkit-transform: scaleX(0); transform: scaleX(0); } /* ===== Mobile Footer ‚Äî compact wrapped layout ===== */ @media (max-width: 640px) { footer .desktop-footer { justify-content: center; /* center instead of space-between */ gap: 14px 22px; /* row gap + column gap */ padding: 0 6%; } footer .desktop-footer .footer-each { width: auto; /* let flex size naturally */ flex: 0 1 auto; } footer .desktop-footer h5 { margin: 6px 0; font-size: 15px; } } </style> <!-- AnchorJS --> <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.0.0/anchor.min.js"></script> <script> anchors.options.visible = 'always'; anchors.add('article h2, article h3, article h5, article h5, article h6'); </script> </body> </html>
